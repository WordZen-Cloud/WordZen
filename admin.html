<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordZen | Admin Kontrol Paneli</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background: #0a0a0a; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .admin-card { background: #1a1a1a; padding: 30px; border-radius: 20px; border: 2px solid #39FF14; width: 100%; max-width: 400px; box-shadow: 0 0 20px rgba(57, 255, 20, 0.2); }
        h1 { color: #39FF14; text-align: center; font-size: 1.5rem; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #333; background: #000; color: #39FF14; font-weight: bold; }
        button { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 800; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-fetch { background: #39FF14; color: #000; }
        .btn-update { background: #ffcc00; color: #000; }
        .user-info { margin-top: 20px; padding: 15px; background: #000; border-radius: 10px; display: none; border-left: 5px solid #39FF14; }
        label { font-size: 0.8rem; color: #888; }
    </style>
</head>
<body>

    <div class="admin-card">
        <h1>WordZen Admin</h1>
        
        <label>Yönetici Şifresi</label>
        <input type="password" id="admin-pass" placeholder="Şifreyi Girin...">
        
        <hr style="border: 0.5px solid #333; margin: 20px 0;">

        <label>Oyuncu ID (Örn: UZ_12345)</label>
        <input type="text" id="target-id" placeholder="Oyuncu ID Yazın...">
        <button class="btn-fetch" onclick="fetchUser()">OYUNCUYU GETİR</button>

        <div id="user-data" class="user-info">
            <p>Mevcut Jeton: <span id="curr-coins" style="color:#ffcc00">0</span></p>
            <p>Mevcut Seviye: <span id="curr-level" style="color:#39FF14">0</span></p>
            
            <label>Yeni Jeton Miktarı</label>
            <input type="number" id="new-coins">
            
            <label>Yeni Seviye</label>
            <input type="number" id="new-level">
            
            <button class="btn-update" onclick="updateUser()">VERİLERİ GÜNCELLE</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        // Senin Firebase Bilgilerin
        const firebaseConfig = {
            apiKey: "AIzaSyCFgWqiyOv1UWfehf8zUtu4XqsXTrRdcZc",
            authDomain: "wordzen-2e052.firebaseapp.com",
            databaseURL: "https://wordzen-2e052-default-rtdb.firebaseio.com",
            projectId: "wordzen-2e052",
            storageBucket: "wordzen-2e052.firebasestorage.app",
            messagingSenderId: "309225718128",
            appId: "1:309225718128:web:8a38717b4b6fc8f3a18fb5"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // ŞİFREYİ BURADAN DEĞİŞTİR KANKA
        const ADMIN_PASSWORD = "Muhiy.1905342"; 

        window.fetchUser = async () => {
            const pass = document.getElementById('admin-pass').value;
            const userId = document.getElementById('target-id').value;

            if(pass !== ADMIN_PASSWORD) { alert("Şifre Yanlış!"); return; }
            if(!userId) { alert("Lütfen bir ID girin!"); return; }

            const userRef = ref(db, 'users/' + userId);
            const snapshot = await get(userRef);

            if (snapshot.exists()) {
                const data = snapshot.val();
                document.getElementById('curr-coins').innerText = data.coins;
                document.getElementById('curr-level').innerText = data.level + 1;
                document.getElementById('new-coins').value = data.coins;
                document.getElementById('new-level').value = data.level;
                document.getElementById('user-data').style.display = 'block';
            } else {
                alert("Böyle bir oyuncu bulunamadı!");
                document.getElementById('user-data').style.display = 'none';
            }
        };

        window.updateUser = async () => {
            const pass = document.getElementById('admin-pass').value;
            const userId = document.getElementById('target-id').value;
            const nCoins = parseInt(document.getElementById('new-coins').value);
            const nLevel = parseInt(document.getElementById('new-level').value);

            if(pass !== ADMIN_PASSWORD) { alert("Şifre Yetkisi Yok!"); return; }

            const userRef = ref(db, 'users/' + userId);
            await update(userRef, {
                coins: nCoins,
                level: nLevel
            });

            alert("Kullanıcı başarıyla güncellendi!");
            fetchUser(); // Verileri tazele
        };
    </script>
</body>
</html>
