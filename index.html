<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">
    <title>WordZen</title>
    <style>
        body { 
            margin: 0; background: #000; color: white; overflow: hidden;
            font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; 
            background-size: cover; background-position: center; transition: background-image 1.5s ease;
        }
        /* Splash Animasyonu */
        #splash { position: fixed; inset: 0; background: #000; z-index: 2000; display: flex; justify-content: center; align-items: center; transition: opacity 1s ease-out; }
        .s-logo { font-size: 3.5rem; font-weight: 200; color: #fff; letter-spacing: 15px; opacity: 0; transform: scale(0.8); animation: zenFade 4s ease-in-out forwards; }
        @keyframes zenFade {
            0% { opacity: 0; transform: scale(0.8); letter-spacing: 5px; }
            40% { opacity: 1; transform: scale(1); letter-spacing: 15px; }
            80% { opacity: 1; transform: scale(1); letter-spacing: 15px; }
            100% { opacity: 0; transform: scale(1.1); letter-spacing: 20px; }
        }

        /* Ãœst Bar */
        #top-bar { width: 100%; padding: 20px; display: flex; justify-content: space-between; box-sizing: border-box; z-index: 100; background: rgba(0,0,0,0.3); }
        .info { font-size: 1.1rem; letter-spacing: 1px; }

        /* Dinamik Ampul Butonu */
        #hint-btn {
            margin-top: 20px; padding: 12px 25px; border-radius: 25px;
            color: #fff; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px;
            transition: all 0.5s ease; border: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }
        /* Jeton Yetersizken (Gri) */
        .hint-passive { background: #333 !important; color: #777 !important; filter: grayscale(1); opacity: 0.6; cursor: not-allowed !important; }
        /* Jeton Yeterliyken (Renkli) */
        .hint-active { background: rgba(250, 152, 58, 0.2) !important; color: #fa983a !important; border-color: #fa983a !important; box-shadow: 0 0 15px rgba(250, 152, 58, 0.3); }

        #word-container { margin-top: 40px; display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; padding: 0 20px; }
        .letter-box { 
            width: 35px; height: 45px; border-bottom: 2px solid rgba(255,255,255,0.4); 
            display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; font-weight: 400; text-transform: uppercase;
        }
        .filled { border-bottom: 2px solid #fff; color: #fff; }
        .hint-reveal { color: #fa983a; border-bottom-color: #fa983a; animation: pulse 0.5s ease; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        #keyboard { position: fixed; bottom: 30px; display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; padding: 10px; width: 95%; }
        button.key { padding: 15px 0; border: none; border-radius: 4px; background: rgba(255,255,255,0.1); color: white; cursor: pointer; font-size: 14px; }
        .del { grid-column: span 2; background: rgba(255, 50, 50, 0.3) !important; }
    </style>
</head>
<body>
    <div id="splash"><div class="s-logo">WORDZEN</div></div>

    <div id="top-bar">
        <div class="info" id="lvl-txt">BÃ–LÃœM 1</div>
        <div class="info">ðŸª™ <span id="coin-txt">150</span></div>
    </div>

    <button id="hint-btn" onclick="useHint()">
        <span style="font-size: 1.5rem;">ðŸ’¡</span>
        <span>12 Jeton</span>
    </button>

    <div id="word-container"></div>
    <div id="keyboard"></div>

    <script>
        if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); }); }

        const levels = [
            // 100 KELÄ°MELÄ°K LÄ°STE (KÄ±saltÄ±lmÄ±ÅŸ hali, senin kodunda tamamÄ± kalsÄ±n)
            {a:"KALE", h:[0]}, {a:"SAAT", h:[0,2]}, {a:"KAPI", h:[0,3]}, {a:"PARA", h:[1,2]}, {a:"ADET", h:[0,2]},
            {a:"KÄ°TAP", h:[0,4]}, {a:"KALEM", h:[0,2]}, {a:"DENÄ°Z", h:[0,3]}, {a:"ÅžEHÄ°R", h:[1,4]}, {a:"GÃœNEÅž", h:[0,2]},
            // ... (Daha Ã¶nce verdiÄŸim 100 kelimenin tamamÄ±nÄ± buraya yapÄ±ÅŸtÄ±rabilirsin)
            {a:"KOLAYLAÅžTIRICI", h:[1,7,13]} 
        ];

        let currentLevel = parseInt(localStorage.getItem('wz_save')) || 0;
        let coins = parseInt(localStorage.getItem('wz_coins')) || 150;
        let userGuess = [];

        function updateUI() {
            document.getElementById('coin-txt').innerText = coins;
            document.getElementById('lvl-txt').innerText = `BÃ–LÃœM ${currentLevel + 1}`;
            
            // Ampul Renk DeÄŸiÅŸtirme MantÄ±ÄŸÄ±
            const hintBtn = document.getElementById('hint-btn');
            if (coins >= 12) {
                hintBtn.className = 'hint-active';
            } else {
                hintBtn.className = 'hint-passive';
            }

            localStorage.setItem('wz_coins', coins);
            localStorage.setItem('wz_save', currentLevel);
        }

        function initGame() {
            const level = levels[currentLevel % levels.length];
            updateUI();
            document.body.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://picsum.photos/1080/1920?sig=${currentLevel}')`;
            
            const container = document.getElementById('word-container');
            container.innerHTML = ""; userGuess = [];

            level.a.split('').forEach((char, i) => {
                const box = document.createElement('div');
                box.className = 'letter-box';
                if (level.h.includes(i)) {
                    box.innerText = char;
                    box.classList.add('filled');
                    userGuess[i] = char;
                } else {
                    box.innerText = "";
                    userGuess[i] = null;
                }
                container.appendChild(box);
            });
        }

        function useHint() {
            if (coins >= 12) {
                let emptyIndices = [];
                userGuess.forEach((val, i) => { if(val === null) emptyIndices.push(i); });
                
                if (emptyIndices.length > 0) {
                    coins -= 12;
                    let randIdx = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
                    let correctChar = levels[currentLevel % levels.length].a[randIdx];
                    
                    userGuess[randIdx] = correctChar;
                    const boxes = document.getElementsByClassName('letter-box');
                    boxes[randIdx].innerText = correctChar;
                    boxes[randIdx].classList.add('filled', 'hint-reveal');
                    
                    updateUI();
                    if(!userGuess.includes(null)) check();
                }
            }
        }

        const alphabet = "ABCÃ‡DEFGÄžHIÄ°JKLMNOÃ–PRSÅžTUÃœVYZ";
        const kbd = document.getElementById('keyboard');
        alphabet.split('').forEach(l => {
            const b = document.createElement('button');
            b.className = 'key'; b.innerText = l;
            b.onclick = () => {
                let empty = userGuess.indexOf(null);
                if(empty !== -1) {
                    userGuess[empty] = l;
                    const boxes = document.getElementsByClassName('letter-box');
                    boxes[empty].innerText = l;
                    boxes[empty].classList.add('filled');
                    if(!userGuess.includes(null)) check();
                }
            };
            kbd.appendChild(b);
        });

        const del = document.createElement('button');
        del.className = 'key del'; del.innerText = "SÄ°L";
        del.onclick = () => {
            for(let i=userGuess.length-1; i>=0; i--) {
                const isHintIdx = levels[currentLevel % levels.length].h.includes(i);
                const isManualHint = document.getElementsByClassName('letter-box')[i].classList.contains('hint-reveal');
                if(!isHintIdx && !isManualHint && userGuess[i] !== null) {
                    userGuess[i] = null;
                    const boxes = document.getElementsByClassName('letter-box');
                    boxes[i].innerText = "";
                    boxes[i].classList.remove('filled');
                    break;
                }
            }
        };
        kbd.appendChild(del);

        function check() {
            if(userGuess.join('') === levels[currentLevel % levels.length].a) {
                coins += 4;
                currentLevel++;
                setTimeout(initGame, 800);
            }
        }

        window.onload = () => {
            setTimeout(() => {
                const s = document.getElementById('splash');
                s.style.opacity = "0";
                setTimeout(() => s.style.display = "none", 1000);
            }, 4000);
            initGame();
        };
    </script>
</body>
</html>
