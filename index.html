<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WordZen</title>
    <style>
        body {
            margin: 0; padding: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif;
            background: #000; background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; height: 100vh;
        }

        /* AÃ‡ILIÅž EKRANI */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; align-items: center; 
            justify-content: center; transition: opacity 1.2s ease;
        }
        .splash-logo { font-size: 3rem; color: #00d4ff; text-shadow: 0 0 20px #00d4ff; font-family: 'Courier New', monospace; }

        #header-logo { margin-top: 15px; font-size: 2.2rem; color: #00d4ff; text-shadow: 0 0 10px #00d4ff; font-family: 'Courier New', monospace; letter-spacing: 4px; }

        .top-right-panel {
            position: absolute; top: 15px; right: 10px;
            display: flex; flex-direction: column; align-items: flex-end; gap: 8px;
            z-index: 100;
        }
        .stat-item {
            background: rgba(0, 0, 0, 0.8); padding: 6px 12px; border-radius: 15px;
            border: 1px solid #ffcc00; color: #ffcc00; font-weight: bold; font-size: 0.9rem;
        }
        #skip-trigger {
            background: #ffcc00; border: none; color: #000; padding: 6px 12px;
            border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 0.65rem;
        }

        #word-display { 
            display: flex; gap: 6px; margin-top: 60px;
            flex-wrap: wrap; justify-content: center; width: 95%; 
        }
        .letter-box {
            width: 38px; height: 48px; background: rgba(255, 255, 255, 0.95); 
            color: #000; border-radius: 8px; display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; font-weight: 900; position: relative;
        }

        /* SÄ°YAH Ä°MLEÃ‡ */
        .cursor::after {
            content: ''; position: absolute; bottom: 8px; width: 60%; height: 3px;
            background: #000; animation: blink 0.8s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        .correct-neon { background: #39FF14 !important; box-shadow: 0 0 20px #39FF14; }
        .wrong-neon { border: 2px solid #ff0000 !important; box-shadow: 0 0 15px #ff0000; }

        #clue-container {
            margin-top: 25px; width: 85%; background: rgba(0, 0, 0, 0.6);
            padding: 15px; border-radius: 15px; text-align: center;
            backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1);
        }
        #clue-text { color: #fff; font-size: 1rem; }

        /* MODAL (ONAY VE Ã–DÃœL PANELLERÄ°) */
        .custom-modal {
            display: none; position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%);
            width: 280px; background: rgba(0, 0, 0, 0.98); border: 2px solid #00d4ff;
            border-radius: 20px; text-align: center; z-index: 2000; padding: 25px;
            box-shadow: 0 0 30px #00d4ff;
        }
        #win-modal { border-color: #39FF14; box-shadow: 0 0 30px #39FF14; }

        .modal-btns { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        .btn-green { background: #39FF14; color: #000; border: none; padding: 12px 30px; border-radius: 12px; font-weight: 900; cursor: pointer; }
        .btn-red { background: #ff0000; color: #fff; border: none; padding: 12px 25px; border-radius: 12px; font-weight: 900; cursor: pointer; }

        #hidden-input { position: absolute; top: -100px; opacity: 0; }
    </style>
</head>
<body>

    <div id="splash-screen"><div class="splash-logo">WordZen</div></div>

    <div id="header-logo">WordZen</div>

    <div class="top-right-panel">
        <div class="stat-item" onclick="useHint()">ðŸ’¡ <span id="coin-count">0</span></div>
        <button id="skip-trigger" onclick="showSkipModal()">SEVÄ°YEYÄ° GEÃ‡ (15 ðŸª™)</button>
        <div class="stat-item" style="color: #00d4ff; border-color: #00d4ff;">LVL: <span id="lvl-txt">1</span></div>
    </div>
    
    <div id="word-display" onclick="focusInput()"></div>

    <div id="clue-container">
        <div id="clue-text">...</div>
    </div>

    <div id="skip-modal" class="custom-modal">
        <h3 style="color: #00d4ff; margin-top: 0;">Emin misin?</h3>
        <p style="color: #fff; font-size: 0.9rem;">15 Jeton karÅŸÄ±lÄ±ÄŸÄ±nda bu seviyeyi geÃ§eceksin.</p>
        <div class="modal-btns">
            <button class="btn-green" onclick="confirmSkip()">EVET</button>
            <button class="btn-red" onclick="hideModals()">HAYIR</button>
        </div>
    </div>

    <div id="win-modal" class="custom-modal">
        <h2 style="color: #39FF14; margin-top: 0;">TEBRÄ°KLER!</h2>
        <p style="color: #fff; font-size: 1.1rem; font-weight: bold;">5 Jeton KazandÄ±n ðŸª™</p>
        <div class="modal-btns">
            <button class="btn-green" style="width: 100%;" onclick="nextLevel()">DEVAM ET</button>
        </div>
    </div>

    <input type="text" id="hidden-input" autocomplete="off">

    <script>
        let coins = parseInt(localStorage.getItem('wordzen_coins')) || 30;
        let currentLevel = parseInt(localStorage.getItem('wordzen_level')) || 0;
        const winSnd = new Audio('dogru.mp3');
        const errSnd = new Audio('yanlis.mp3');

        const levels = [
            {a:"ADA", m:"DÃ¶rt tarafÄ± sularla Ã§evrili kara parÃ§asÄ±."},
            {a:"KALEM", m:"YazÄ± yazmaya yarayan araÃ§."},
            {a:"DENÄ°Z", m:"GeniÅŸ tuzlu su kÃ¼tlesi."},
            {a:"DUVAR", m:"YapÄ±larÄ±n dik yÃ¼zeyi."}
        ];

        window.onload = () => {
            initGame();
            setTimeout(() => { document.getElementById('splash-screen').remove(); }, 5000);
        };

        function focusInput() { document.getElementById('hidden-input').focus(); updateCursor(); }

        function initGame() {
            let bgNum = (Math.floor(currentLevel / 20) % 10) + 1;
            document.body.style.backgroundImage = `url('bg${bgNum}.jpg')`;
            const container = document.getElementById('word-display');
            document.getElementById('clue-text').innerText = levels[currentLevel % levels.length].m;
            container.innerHTML = "";
            levels[currentLevel % levels.length].a.split('').forEach((_, i) => {
                const box = document.createElement('div');
                box.className = 'letter-box'; box.id = 'box-' + i;
                container.appendChild(box);
            });
            updateUI();
            updateCursor();
        }

        function updateCursor() {
            document.querySelectorAll('.letter-box').forEach(b => b.classList.remove('cursor'));
            for(let i = 0; i < levels[currentLevel % levels.length].a.length; i++) {
                const box = document.getElementById('box-' + i);
                if(box.innerText === "") { box.classList.add('cursor'); break; }
            }
        }

        document.getElementById('hidden-input').addEventListener('input', (e) => {
            const levelData = levels[currentLevel % levels.length];
            const val = e.target.value.toUpperCase().slice(-1);
            e.target.value = "";
            if(val.match(/[A-ZÄžÃœÅžÄ°Ã–Ã‡]/)) {
                for(let i = 0; i < levelData.a.length; i++) {
                    const box = document.getElementById('box-' + i);
                    if(box.innerText === "") { 
                        box.innerText = val; 
                        box.classList.remove('wrong-neon');
                        updateCursor();
                        checkWin(); break; 
                    }
                }
            }
        });

        window.addEventListener('keydown', (e) => {
            if(e.key === "Backspace") {
                const levelData = levels[currentLevel % levels.length];
                for(let i = levelData.a.length - 1; i >= 0; i--) {
                    const box = document.getElementById('box-' + i);
                    if(box.innerText !== "" && !box.dataset.hint) { 
                        box.innerText = ""; 
                        box.classList.remove('wrong-neon');
                        updateCursor(); break; 
                    }
                }
            }
        });

        function checkWin() {
            const levelData = levels[currentLevel % levels.length];
            let res = "";
            for(let i=0; i < levelData.a.length; i++) res += document.getElementById('box-' + i).innerText;
            if(res.length === levelData.a.length) {
                if(res === levelData.a) {
                    winSnd.play();
                    document.querySelectorAll('.letter-box').forEach(b => { b.classList.add('correct-neon'); b.classList.remove('cursor'); });
                    setTimeout(() => { document.getElementById('win-modal').style.display = 'block'; }, 600);
                } else {
                    errSnd.play();
                    document.querySelectorAll('.letter-box').forEach(b => b.classList.add('wrong-neon'));
                }
            }
        }

        function nextLevel() {
            coins += 5;
            currentLevel++;
            hideModals();
            initGame();
        }

        function useHint() {
            if(coins < 5) return;
            const levelData = levels[currentLevel % levels.length];
            let empty = [];
            for(let i=0; i<levelData.a.length; i++) if(document.getElementById('box-'+i).innerText === "") empty.push(i);
            if(empty.length > 0) {
                coins -= 5;
                let idx = empty[Math.floor(Math.random() * empty.length)];
                let box = document.getElementById('box-' + idx);
                box.innerText = levelData.a[idx];
                box.dataset.hint = "true";
                updateUI(); updateCursor(); checkWin();
            }
        }

        function updateUI() {
            document.getElementById('coin-count').innerText = coins;
            document.getElementById('lvl-txt').innerText = currentLevel + 1;
            localStorage.setItem('wordzen_coins', coins);
            localStorage.setItem('wordzen_level', currentLevel);
        }

        function showSkipModal() { if(coins >= 15) document.getElementById('skip-modal').style.display = 'block'; }
        function hideModals() { 
            document.getElementById('skip-modal').style.display = 'none'; 
            document.getElementById('win-modal').style.display = 'none'; 
        }
        function confirmSkip() { coins -= 15; hideModals(); currentLevel++; initGame(); updateUI(); }
    </script>
</body>
</html>