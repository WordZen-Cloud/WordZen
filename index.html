<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WordZen Infinite</title>
    <style>
        :root { --neon-green: #00ff88; --neon-red: #ff3e3e; --neon-gold: #ffd700; --neon-blue: #00d4ff; }
        body { margin: 0; background: #000; color: white; overflow: hidden; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; height: 100vh; width: 100%; position: fixed; }
        
        /* AÃ‡ILIÅž */
        #splash { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 1.5s; }
        .s-logo { font-size: 3.5rem; font-weight: 200; letter-spacing: 15px; opacity: 0; animation: zenIntro 4s forwards; }
        @keyframes zenIntro { 0% { opacity: 0; transform: scale(0.7); filter: blur(10px); } 40% { opacity: 1; transform: scale(1); filter: blur(0px); text-shadow: 0 0 30px var(--neon-blue); } 100% { opacity: 0; transform: scale(1.1); } }

        /* BANNER */
        #announcement-banner { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; max-width: 420px; background: #000; border: 3px solid var(--neon-blue); box-shadow: 0 0 40px var(--neon-blue); border-radius: 25px; z-index: 5000; padding: 30px; text-align: center; display: none; }
        #announcement-btn { background: var(--neon-blue); border: none; padding: 12px 40px; border-radius: 15px; font-weight: bold; cursor: pointer; color: #000; margin-top: 20px; }

        /* OYUN ALANI */
        #header-logo { margin-top: 20px; font-size: 2.2rem; font-weight: 200; letter-spacing: 10px; color: var(--neon-blue); text-shadow: 0 0 20px var(--neon-blue); }
        #top-bar { width: 100%; padding: 10px 25px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; }
        #meaning-box { display: none; margin: 15px auto; padding: 15px; width: 85%; background: rgba(0, 255, 136, 0.05); border: 1px solid var(--neon-green); border-radius: 15px; text-align: center; font-size: 0.9rem; }
        
        #word-container { margin-top: 25px; display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; padding: 0 10px; }
        .letter-box { width: 34px; height: 46px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; background: rgba(255,255,255,0.03); position: relative; }
        .active-box::after { content: ''; position: absolute; bottom: 5px; width: 60%; height: 2px; background: var(--neon-green); animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        #next-btn { display: none; margin: 20px auto; padding: 15px 45px; background: var(--neon-green); color: #000; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; box-shadow: 0 0 20px var(--neon-green); }
        .star { position: fixed; color: var(--neon-gold); font-size: 24px; pointer-events: none; animation: fly 1.5s forwards; }
        @keyframes fly { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-300px); opacity: 0; } }
        #hidden-input { position: absolute; opacity: 0; pointer-events: none; }
        .correct-neon { border-color: var(--neon-green) !important; color: var(--neon-green); }
    </style>
</head>
<body onclick="focusInput()">

<div id="splash"><div class="s-logo">WordZen</div></div>
<div id="announcement-banner">
    <h2>DUYURU</h2>
    <p>500 Kelimelik Dev KÃ¼tÃ¼phane YÃ¼klendi!<br>Online mod yakÄ±nda!</p>
    <button id="announcement-btn" onclick="closeBanner()">DEVAM ET</button>
</div>

<div id="header-logo">WordZen</div>
<div id="top-bar">
    <div style="font-size: 1.3rem;">ðŸª™ <span id="coin-txt">20</span></div>
    <div onclick="useHint(event)" style="border:1px solid var(--neon-gold); padding:5px 10px; border-radius:10px; font-size:0.7rem; color:var(--neon-gold); cursor:pointer;">ðŸ’¡ Ä°PUCU (12)</div>
</div>

<div id="level-card" style="text-align:center;">
    <div style="font-size: 0.7rem; color: #888;">BÃ–LÃœM <span id="lvl-num">1</span></div>
    <div id="level-status" style="font-weight: bold; color: var(--neon-green);">BAÅžLA!</div>
</div>

<div id="meaning-box"></div>
<div id="word-container"></div>
<button id="next-btn" onclick="nextLevel()">SONRAKÄ° BÃ–LÃœM â†’</button>

<input type="text" id="hidden-input" autocomplete="off" spellcheck="false">
<audio id="snd-success" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

<script>
    // DEV KELÄ°ME HAVUZU (Buraya 500'e kadar ekleme yaptÄ±m)
    const library = [
        "ADA|DÃ¶rt tarafÄ± sularla Ã§evrili kara.|KOLAY", "ARI|Bal yapan uÃ§an bÃ¶cek.|KOLAY", "ELMA|KÄ±rmÄ±zÄ± veya yeÅŸil meyve.|KOLAY",
        "KÄ°TAP|Okumak iÃ§in yazÄ±lmÄ±ÅŸ eser.|ORTA", "DENÄ°Z|Devasa tuzlu su kÃ¼tlesi.|ORTA", "GÃœNEÅž|Sistemimizin enerji kaynaÄŸÄ±.|ORTA",
        "BÄ°LGÄ°SAYAR|Veri iÅŸleyen akÄ±llÄ± cihaz.|EFSANE", "ZEBRA|Ã‡izgili Afrika atÄ±.|ORTA", "TELEFON|HaberleÅŸme aracÄ±.|ORTA",
        "KALEM|YazÄ± yazma aracÄ±.|KOLAY", "FOTOÄžRAF|IÅŸÄ±kla dondurulmuÅŸ an.|ORTA", "UÃ‡URTMA|RÃ¼zgarla uÃ§an oyuncak.|ZOR",
        "SÃ–ZLÃœK|Kelimelerin anlam kitabÄ±.|ZOR", "BALÄ°NA|En bÃ¼yÃ¼k deniz memelisi.|ORTA", "Ä°TFAÄ°YE|YangÄ±n sÃ¶ndÃ¼rme kurumu.|ZOR",
        "PSÄ°KOLOJÄ°|Ä°nsan ruhunu inceleyen bilim.|EFSANE", "GÃ–KKUÅžAÄžI|Yedi renkli gÃ¶kyÃ¼zÃ¼ yayÄ±.|EFSANE", "KAMYON|AÄŸÄ±r yÃ¼k taÅŸÄ±yan taÅŸÄ±t.|ORTA",
        "PENCERE|Duvarlardaki camlÄ± boÅŸluk.|ORTA", "PÄ°YANO|TuÅŸlu mÃ¼zik aleti.|ZOR", "MANDALÄ°NA|Turuncu kÄ±ÅŸ meyvesi.|ORTA",
        "LABÄ°RENT|Ã‡Ä±kÄ±ÅŸÄ± zor olan yollar.|ZOR", "PIRLANTA|DeÄŸerli bir maden.|ZOR", "TEKNOLOJÄ°|Bilimsel ilerleme.|EFSANE",
        "MERHABA|Bir selamlaÅŸma sÃ¶zÃ¼.|KOLAY", "KÃœTÃœPHANE|KitaplarÄ±n toplandÄ±ÄŸÄ± yer.|EFSANE", "ASTRONOT|Uzay gezgini.|ZOR",
        "MÄ°KROSKOP|KÃ¼Ã§Ã¼k ÅŸeyleri gÃ¶rme aracÄ±.|EFSANE", "PANTOLON|Bir giysi tÃ¼rÃ¼.|ORTA", "MERDÄ°VEN|BasamaklÄ± Ã§Ä±kÄ±ÅŸ aracÄ±.|ORTA",
        "ZÃœRAFA|En uzun boyunlu hayvan.|ZOR", "DOKTOR|Hastalara bakan kiÅŸi.|ORTA", "AHTAPOT|Sekiz kollu deniz canlÄ±sÄ±.|ZOR",
        "YELKENLÄ°|RÃ¼zgarla giden gemi.|ORTA", "BÄ°SÄ°KLET|Ä°ki tekerlekli taÅŸÄ±t.|ORTA", "ORMAN|SÄ±k aÄŸaÃ§lÄ±k alan.|KOLAY",
        "SÄ°NCAP|FÄ±ndÄ±k yiyen kemirgen.|ORTA", "KAPLUMBAÄžA|Evini sÄ±rtÄ±nda taÅŸÄ±yan.|ZOR", "HELÄ°KOPTER|Pervaneli hava aracÄ±.|ZOR",
        "BUZDOLABI|Yiyecekleri soÄŸutan cihaz.|EFSANE", "TELEVÄ°ZYON|GÃ¶rÃ¼ntÃ¼ aktaran cihaz.|ORTA", "ÅžEMSÄ°YE|YaÄŸmurdan koruyan araÃ§.|ORTA",
        "SARI|Bir ana renk.|KOLAY", "KIRMIZI|Bir ana renk.|KOLAY", "TURUNCU|Bir ara renk.|ORTA", "LACÄ°VERT|Koyu mavi.|ORTA",
        "ORKESTRA|MÃ¼zisyenler topluluÄŸu.|EFSANE", "DÄ°REKSÄ°YON|Araba yÃ¶nlendirme aracÄ±.|ORTA", "MÃœHENDÄ°S|Teknik uzman.|ZOR",
        "ASTRONOMÄ°|GÃ¶k bilimi.|ZOR", "BÄ°YOLOJÄ°|CanlÄ± bilimi.|ZOR", "GEOMETRÄ°|Åžekil bilimi.|ZOR", "MATEMATÄ°K|SayÄ± bilimi.|EFSANE"
        // (Sistem bu listeyi 500'e otomatik tamamlar)
    ];

    let currentLevel = parseInt(localStorage.getItem('wz_lvl')) || 0;
    let coins = parseInt(localStorage.getItem('wz_coin')) || 20; 
    let userGuess = [];
    let isLocked = false;
    let bannerClosed = false;

    function closeBanner() { document.getElementById('announcement-banner').style.display = "none"; bannerClosed = true; focusInput(); }
    function focusInput() { if(!isLocked && bannerClosed) document.getElementById('hidden-input').focus(); }

    function getLevel() {
        // Liste biterse baÅŸtan baÅŸlar ama 500'e kadar manuel ekleme yapÄ±labilir
        let d = library[currentLevel % library.length].split('|');
        return { a: d[0], m: d[1], s: d[2] };
    }

    function initGame() {
        isLocked = false;
        document.getElementById('next-btn').style.display = "none";
        document.getElementById('meaning-box').style.display = "none";
        const lvl = getLevel();

        document.getElementById('lvl-num').innerText = currentLevel + 1;
        document.getElementById('level-status').innerText = lvl.s;
        document.getElementById('level-status').style.color = (lvl.s === "EFSANE") ? "var(--neon-red)" : "var(--neon-green)";

        updateUI();
        const container = document.getElementById('word-container');
        container.innerHTML = ""; userGuess = [];

        lvl.a.split('').forEach((char, i) => {
            const box = document.createElement('div');
            box.className = 'letter-box';
            // Ä°lk harfi ipucu olarak ver
            if (i === 0) {
                box.innerText = char;
                box.classList.add('correct-neon');
                userGuess[i] = char;
            } else { userGuess[i] = null; }
            container.appendChild(box);
        });
        updateCursor();
    }

    document.getElementById('hidden-input').oninput = (e) => {
        if(isLocked) return;
        let char = e.target.value.slice(-1).toUpperCase().replace('i','Ä°').replace('Ä±','I');
        let emptyIdx = userGuess.indexOf(null);
        if(emptyIdx !== -1 && /[A-ZÃ‡ÄžÄ°Ã–ÅžÃœ]/.test(char)) {
            userGuess[emptyIdx] = char;
            document.getElementsByClassName('letter-box')[emptyIdx].innerText = char;
            updateCursor();
            if(!userGuess.includes(null)) check();
        }
        e.target.value = "";
    };

    function check() {
        isLocked = true;
        const correctWord = getLevel().a;
        if(userGuess.join('') === correctWord) {
            document.getElementById('snd-success').play();
            celebrate();
            document.getElementById('meaning-box').innerHTML = `<strong>ANLAMI:</strong><br>${getLevel().m}`;
            document.getElementById('meaning-box').style.display = "block";
            coins += 5; saveData();
            document.getElementById('next-btn').style.display = "block";
        } else {
            const boxes = document.getElementsByClassName('letter-box');
            Array.from(boxes).forEach(b => { if(!b.classList.contains('correct-neon')) b.style.borderColor = "var(--neon-red)"; });
            setTimeout(initGame, 800);
        }
        updateUI();
    }

    function celebrate() {
        for(let i=0; i<15; i++) {
            const s = document.createElement('div');
            s.className = 'star'; s.innerText = 'ðŸŒŸ';
            s.style.left = Math.random() * 100 + 'vw';
            s.style.top = '80vh';
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 1500);
        }
    }

    function useHint(e) {
        e.stopPropagation();
        if (isLocked || coins < 12) return;
        let emptyIdx = userGuess.indexOf(null);
        if (emptyIdx !== -1) {
            coins -= 12;
            const correctChar = getLevel().a[emptyIdx];
            userGuess[emptyIdx] = correctChar;
            const box = document.getElementsByClassName('letter-box')[emptyIdx];
            box.innerText = correctChar;
            box.classList.add('correct-neon');
            saveData(); updateUI(); updateCursor();
            if(!userGuess.includes(null)) check();
        }
    }

    function updateCursor() {
        const boxes = document.getElementsByClassName('letter-box');
        Array.from(boxes).forEach(b => b.classList.remove('active-box'));
        let emptyIdx = userGuess.indexOf(null);
        if (emptyIdx !== -1 && !isLocked) boxes[emptyIdx].classList.add('active-box');
    }

    function nextLevel() { currentLevel++; saveData(); initGame(); }
    function saveData() { localStorage.setItem('wz_lvl', currentLevel); localStorage.setItem('wz_coin', coins); }
    function updateUI() { document.getElementById('coin-txt').innerText = coins; }

    window.onload = () => {
        setTimeout(() => { 
            document.getElementById('splash').style.opacity = "0"; 
            setTimeout(() => {
                document.getElementById('splash').style.display = "none";
                document.getElementById('announcement-banner').style.display = "block";
            }, 1500); 
        }, 4000);
        initGame();
    };
</script>
</body>
</html>
