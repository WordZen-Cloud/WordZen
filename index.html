<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WordZen Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <style>
        * { -webkit-tap-highlight-color: transparent; outline: none; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; background: #000; font-family: 'Montserrat', sans-serif; }
        body { background-size: cover; background-position: center; display: flex; flex-direction: column; align-items: center; }

        /* SOL ÃœST BÄ°LGÄ° PANELÄ° (Ä°STEDÄ°ÄÄ°N GÄ°BÄ°) */
        .info-panel { position: absolute; top: 15px; left: 15px; display: flex; flex-direction: column; gap: 5px; z-index: 1000; }
        .info-item { background: rgba(0,0,0,0.7); color: #fff; padding: 5px 12px; border-radius: 10px; font-size: 0.7rem; border: 1px solid rgba(255,255,255,0.1); letter-spacing: 1px; }
        .lvl-tag { color: #39FF14; font-weight: 900; } /* Seviye vurgusu */

        /* SAÄ ÃœST JETON PANELÄ° */
        .coin-panel { position: absolute; top: 15px; right: 15px; display: flex; flex-direction: column; align-items: flex-end; gap: 8px; z-index: 1000; }
        #coin-display { background: rgba(0,0,0,0.8); padding: 8px 15px; border-radius: 15px; color: #ffcc00; font-size: 1rem; border: 1px solid #ffcc00; }
        #free-coin-btn { background: #39FF14; color: #000; padding: 8px 12px; border-radius: 12px; font-size: 0.7rem; font-weight: 900; animation: pulse 2s infinite; border: none; cursor: pointer; }

        /* OYUN ALANI */
        #game-area { width: 100%; display: flex; flex-direction: column; align-items: center; margin-top: 130px; }
        #header-logo { font-size: 2.8rem; color: #fff; letter-spacing: 5px; margin-bottom: 30px; cursor: pointer; text-shadow: 0 0 20px rgba(57, 255, 20, 0.4); }
        #word-display { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; width: 90%; margin-bottom: 30px; }
        .letter-box { width: 45px; height: 55px; background: #fff; color: #000; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; font-weight: 900; }
        #clue-container { width: 85%; min-height: 80px; background: rgba(0,0,0,0.7); padding: 20px; border-radius: 20px; color: #fff; text-align: center; border: 1px solid rgba(255,255,255,0.1); }

        /* MODAL & BUTONLAR */
        .custom-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; background: #111; border-radius: 25px; padding: 25px; border: 2px solid #333; z-index: 2000; text-align: center; }
        .btn { width: 100%; padding: 12px; border-radius: 12px; border: none; font-weight: 900; margin-top: 10px; cursor: pointer; }
        .btn-yes { background: #39FF14; color: #000; }
        .btn-no { background: #ff4b2b; color: #fff; }
        
        #hidden-input { position: absolute; top: -1000px; opacity: 0; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    </style>
</head>
<body onclick="enableFullScreenAndFocus()">

    <div class="info-panel">
        <div class="info-item">SEVÄ°YE: <span id="lvl-txt" class="lvl-tag">1</span></div>
        <div class="info-item">ID: <span id="player-id">...</span></div>
    </div>

    <div class="coin-panel">
        <div id="coin-display">ğŸª™ <span id="coin-count">0</span></div>
        <button id="free-coin-btn" onclick="watchAdForCoins()">ğŸ +25 JETON</button>
        <button class="btn" style="background:rgba(255,255,255,0.1); color:#fff; font-size:0.6rem; padding:5px;" onclick="useHint()">Ä°PUCU (10)</button>
    </div>

    <div id="game-area">
        <div id="header-logo">WordZen</div>
        <div id="word-display"></div>
        <div id="clue-container"><div id="clue-text">BaÅŸlatÄ±lÄ±yor...</div></div>
    </div>

    <div id="admin-panel" class="custom-modal" style="border-color: #39FF14;">
        <h3 style="color: #39FF14;">ADMÄ°N PANELÄ°</h3>
        <input type="text" id="target-id" placeholder="Hedef Oyuncu ID" style="width:100%; padding:10px; margin-bottom:10px;">
        <input type="number" id="admin-coin" placeholder="Jeton SayÄ±sÄ±" style="width:100%; padding:10px; margin-bottom:10px;">
        <button class="btn btn-yes" onclick="sendCoins()">GÃ–NDER</button>
        <button class="btn btn-no" onclick="closeAdmin()">KAPAT</button>
    </div>

    <div id="win-modal" class="custom-modal">
        <h2 style="color:#fff;">TEBRÄ°KLER!</h2>
        <button class="btn btn-yes" onclick="nextLevel()">SONRAKÄ° BÃ–LÃœM</button>
    </div>

    <input type="text" id="hidden-input" autocomplete="off">

    <script type="module">
        // FIREBASE VE REKLAM ID'LERÄ°NÄ° BURAYA EKLEMEYÄ° UNUTMA KANKA!
        const firebaseConfig = { /* SÄ°ZÄ°N BÄ°LGÄ°LERÄ°NÄ°Z */ };
        
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getDatabase, ref, set, onValue, update, get } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        let userId = localStorage.getItem('wordzen_id') || "USER_" + Math.floor(Math.random()*90000+10000);
        localStorage.setItem('wordzen_id', userId);
        let coins = 30;
        let currentLevel = 0;
        let adminClicks = 0;

        // TAM EKRAN FONKSÄ°YONU
        window.enableFullScreenAndFocus = function() {
            document.getElementById('hidden-input').focus();
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(e => console.log("Tam ekran aÃ§Ä±lamadÄ±."));
            }
        };

        // VERÄ° SENKRONÄ°ZASYONU
        const userRef = ref(db, 'users/' + userId);
        onValue(userRef, (snap) => {
            const data = snap.val();
            if(data) { 
                coins = data.coins; 
                currentLevel = data.level; 
                updateUI(); 
            } else { 
                set(userRef, { coins: 30, level: 0, id: userId }); 
            }
        });

        // ADMÄ°N PANELÄ° (Logoya 5 TÄ±k)
        document.getElementById('header-logo').onclick = (e) => {
            e.stopPropagation();
            adminClicks++;
            if(adminClicks === 5) {
                const pass = prompt("Åifre:");
                if(pass === "zen123") document.getElementById('admin-panel').style.display = 'block';
                adminClicks = 0;
            }
            setTimeout(() => adminClicks = 0, 3000);
        };

        // UI GÃœNCELLEME
        window.updateUI = function() {
            document.getElementById('coin-count').innerText = coins;
            document.getElementById('lvl-txt').innerText = currentLevel + 1;
            document.getElementById('player-id').innerText = userId;
        };

        window.sendCoins = async function() {
            const tid = document.getElementById('target-id').value;
            const amount = parseInt(document.getElementById('admin-coin').value);
            const targetRef = ref(db, 'users/' + tid);
            const snap = await get(targetRef);
            if(snap.exists()) {
                update(targetRef, { coins: (snap.val().coins || 0) + amount });
                alert("BaÅŸarÄ±lÄ±!");
                closeAdmin();
            }
        };

        window.closeAdmin = () => document.getElementById('admin-panel').style.display = 'none';

        // Kelime listesi ve diÄŸer fonksiyonlar burada devam eder...
        // (Kodun geri kalanÄ± bir Ã¶ncekiyle aynÄ± mantÄ±ktadÄ±r)
        
        window.onload = () => { /* initGame() Ã§aÄŸrÄ±sÄ± */ };
    </script>
</body>
</html>